<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.0.26 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc strict="yes"?>
<?rfc toc="yes"?>
<?rfc tocdepth="3"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc subcompact="no"?>
<?rfc iprnotified="no"?>

<rfc ipr="trust200902" docName="draft-koster-t2trg-hsml-00" category="exp">

  <front>
    <title>Content Formats for Hypertext Sensor Markup</title>

    <author initials="M." surname="Koster" fullname="Michael Koster">
      <organization>SmartThings</organization>
      <address>
        <postal>
          <street>1281 Lawrence Station Road</street>
          <city>Sunnyvale</city>
          <code>94089</code>
          <country>USA</country>
        </postal>
        <phone>+1-707-502-5136</phone>
        <email>michael.koster@smartthings.com</email>
      </address>
    </author>

    <date year="2016" month="February" day="21"/>

    <area>Internet</area>
    <workgroup>Thing-to-Thing Research Group</workgroup>
    <keyword>T2TRG, Web of Things, Hypermedia, Semantic Interoperability</keyword>

    <abstract>


<t>Machine hypermedia content formats exist for web links <xref target="RFC5988"/> <xref target="RFC6690"/> and for data items <xref target="I-D.jennings-core-senml"/>. Structured data contains both links and items in a type known as the collection type. This draft describes content formats for representation of machine resources in collections.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">
<t>Collection is a web page for things. This draft describes a content format for machine collections that contain named items and links that point to and describe items. Link representations are compatible with CoRE Link-Format <xref target="RFC6690"/>. Item representations in the collection are compatible with <xref target="I-D.jennings-core-senml"/>.</t>

</section>
<section anchor="structure-of-the-collection" title="Structure of the Collection">

<section anchor="base-elements" title="Base elements">
<t>Base elements set the context under which to interpret values in links and items within a representation od a colection.</t>

<t>The base name element (bn) indicates the base URI or an absolute reference from which to base relative references found in the links. It functions as an embedded base URI reference as per <xref target="RFC3986"/> Section 5.1.1</t>

<t>The format of the base elements are specified in <xref target="I-D.jennings-core-senml"/>. <xref target="fig-example-basename"/> is an example of a base name element.</t>

<figure title="SenML Base Name Example" align="left" anchor="fig-example-basename"><artwork><![CDATA[
    "bn": "/dev/sen/temp/"
]]></artwork></figure>

<t>Other base items from SenML are permissible, including base time (bt) and base value(bv). If additional senml base element are present, the client MUST interpret the items in the collection in the context of the applicable base elements. For example, if there is a “bv” or base value elment, all of the returned values from items in the collection MUST be added to the base value as per <xref target="I-D.jennings-core-senml"/>.</t>

</section>
<section anchor="links" title="Links">
<t>The links element (l) is an array of hyperlinks based on the structure and syntax of <xref target="I-D.ietf-core-links-json"/></t>

</section>
<section anchor="items" title="Items">

</section>
</section>
<section anchor="content-formats" title="Content Formats">

<section anchor="json" title="JSON">

</section>
<section anchor="xml" title="XML">

</section>
<section anchor="alternate-content-formats" title="Alternate Content Formats">

<section anchor="link-format" title="Link-Format">

</section>
<section anchor="senml" title="SenML">

</section>
</section>
</section>
<section anchor="example-serialization-formats" title="Example Serialization Formats">
<t><xref target="fig-example-hsml"/> shows an example document in hsml+json format</t>

<figure title="application/hsml+json Example" align="left" anchor="fig-example-hsml"><artwork><![CDATA[
{
  "bn":"/3303/1/",
  "i":[
    {"n":"5700","v":"31.3","u":"Cel"},
    {"n":"5701","vs":"Cel"},
    {"n":"5602","v":"87.1","u":"Cel"},
    {"n":"5601","v":"18.3","u":"Cel"},
    {"n":"5605"},
    {"n":"5603","v":"0","u":"Cel"},
    {"n":"5604","v":"260","u":"Cel"},
    {"n":"5750","vs":"Inboard Bearing"}
  ],
  "l":[
    {"href":"","rel":"self","rt":"temperature","u":"Cel"},
    {"href":"5700","rt":"currentValue","u":"Cel"},
    {"href":"5701","rt":"units"},
    {"href":"5602","rt":"maxValue","u":"Cel"},
    {"href":"5601","rt":"minValue","u":"Cel"},
    {"href":"5605","rt":"resetMaxMin"},
    {"href":"5603","rt":"minRange","u":"Cel"},
    {"href":"5604","rt":"maxRange","u":"Cel"},
    {"href":"5750","rt":"appType"}
  ]
}
]]></artwork></figure>

<t>Link-Format</t>

<t>SenML</t>

</section>
<section anchor="uri-handling" title="URI handling">

<section anchor="base-uri-and-item-names" title="Base URI and item names">

</section>
<section anchor="query-filtering-and-selection" title="Query filtering and selection">

</section>
</section>
<section anchor="interaction-methods" title="Interaction Methods">

<section anchor="collection-interaction" title="Collection Interaction">

<section anchor="get" title="GET">
<t>List Collection</t>

</section>
<section anchor="post" title="POST">
<t>Add Item</t>

</section>
<section anchor="put" title="PUT">
<t>Replace Entire Collection</t>

</section>
<section anchor="delete" title="DELETE">
<t>Remove Entire COllection</t>

</section>
</section>
<section anchor="link-interaction" title="Link Interaction">

<section anchor="get-1" title="GET">
<t>List Links</t>

</section>
<section anchor="post-1" title="POST">
<t>Add Links</t>

</section>
<section anchor="patch" title="PATCH">
<t>Modify Links</t>

</section>
</section>
<section anchor="item-interaction" title="Item Interaction">

<section anchor="link-embedding" title="Link Embedding">

</section>
</section>
</section>
<section anchor="security-considerations" title="Security Considerations">

<section anchor="object-signing" title="Object Signing">
<t>Collection representations are encapsulated and may be signed objects in order to protect the integrity of data and metadata, including time and access control information.</t>

</section>
<section anchor="signed-embedded-time-stamps" title="Signed Embedded Time Stamps">
<t>The collection may include time stamps (bt and t) that are signed with the object data and metadata.</t>

</section>
<section anchor="signed-embedded-access-control" title="Signed Embedded Access Control">
<t>The colleciton representation may include access control information in the encapsulation, also signed with the metadata, that can instruct the server to allow a particular class of access to requests that contain a particular credential.</t>

</section>
</section>
<section anchor="reserved-identifiers" title="Reserved Identifiers">

<section anchor="hsml-keywords" title="hsml Keywords">
<t>The following keywords are reserved for use by hsml processing to identify sub-elements of a hsml serialization</t>

<t><list style="hanging">
  <t hangText='“i”'><vspace blankLines='0'/>
  indicates the list of named items</t>
  <t hangText='“l”'><vspace blankLines='0'/>
  indicates the list of links</t>
</list></t>

</section>
<section anchor="link-keywords" title="Link Keywords">
<t>The following keywords are reserved for use in a hsml serialization to indicate elements of a web link</t>

<t><list style="hanging">
  <t hangText='“href”'><vspace blankLines='0'/>
  target of a link reference. This may be a relative reference in the collection e.g. “currentValue” or a local absolute reference “/sensors/temp/currentValue” or a full reference “https://example.com/sensors/temp/currentValue”</t>
  <t hangText='“anchor”'><vspace blankLines='0'/>
  overrides the default resource context</t>
  <t hangText='“rel”'><vspace blankLines='0'/>
  link relation type</t>
</list></t>

<section anchor="link-relation-types" title="Link Relation Types">
<t>The following keywords are reserved for use in a hsml serialization to indicate types of link relations</t>

<t><list style="hanging">
  <t hangText='“self”'><vspace blankLines='0'/>
  refers to the collection itself</t>
  <t hangText='“item”'><vspace blankLines='0'/>
  the item is represented in the “local” context of the collection, i.e. not a subresource</t>
  <t hangText='“sub”'><vspace blankLines='0'/>
  the item is a subresource of the collection</t>
  <t hangText='“grp”'><vspace blankLines='0'/>
  the item is available for collective (group) interaction</t>
</list></t>

</section>
<section anchor="link-attribute-types" title="Link Attribute Types">
<t>The following keywords are reserved for use in a hsml serialization to indicate types of link attributes</t>

<t><list style="hanging">
  <t hangText='“rt”'><vspace blankLines='0'/>
  the resource type of the item</t>
  <t hangText='“u”'><vspace blankLines='0'/>
  units of measure</t>
  <t hangText='“ct”'><vspace blankLines='0'/>
  the content-format of the item</t>
</list></t>

</section>
</section>
<section anchor="senml-keywords" title="SenML Keywords">
<t>The following keywords are reserved for use in a hsml serialization to indicate elements within the serialization</t>

<t><list style="hanging">
  <t hangText='“bn”'><vspace blankLines='0'/>
  the base name or base URI of the collection, relative to the service location e.g. “/sensors/temp/”</t>
  <t hangText='“bt”'><vspace blankLines='0'/>
  the base time that corresponds with the encapsulated state of the collection</t>
  <t hangText='“t”'><vspace blankLines='0'/>
  the time stamp that corresponds to the encapsulated state of the item in the collection, relative to the base time “bt”</t>
  <t hangText='“n”'><vspace blankLines='0'/>
  the name or URI of the resource, relative to the base name of the collection e.g. “currentValue”.</t>
  <t hangText='“u”'><vspace blankLines='0'/>
  units of measure</t>
  <t hangText='“v”'><vspace blankLines='0'/>
  number value</t>
  <t hangText='“vb”'><vspace blankLines='0'/>
  boolean value</t>
  <t hangText='“vo”'><vspace blankLines='0'/>
  object value, an extension to the senml value types to enable embedded objects and forms</t>
  <t hangText='“vs”'><vspace blankLines='0'/>
  string value</t>
</list></t>

</section>
</section>


  </middle>

  <back>


    <references title='Informative References'>





<reference  anchor='RFC6690' target='http://www.rfc-editor.org/info/rfc6690'>
<front>
<title>Constrained RESTful Environments (CoRE) Link Format</title>
<author initials='Z.' surname='Shelby' fullname='Z. Shelby'><organization /></author>
<date year='2012' month='August' />
<abstract><t>This specification defines Web Linking using a link format for use by constrained web servers to describe hosted resources, their attributes, and other relationships between links.  Based on the HTTP Link Header field defined in RFC 5988, the Constrained RESTful Environments (CoRE) Link Format is carried as a payload and is assigned an Internet media type.  &quot;RESTful&quot; refers to the Representational State Transfer (REST) architecture.  A well-known URI is defined as a default entry point for requesting the links hosted by a server.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='RFC' value='6690'/>
<seriesInfo name='DOI' value='10.17487/RFC6690'/>
</reference>



<reference anchor='I-D.ietf-core-links-json'>
<front>
<title>Representing CoRE Formats in JSON and CBOR</title>

<author initials='K' surname='Li' fullname='Kepeng Li'>
    <organization />
</author>

<author initials='A' surname='Rahman' fullname='Akbar Rahman'>
    <organization />
</author>

<author initials='C' surname='Bormann' fullname='Carsten Bormann'>
    <organization />
</author>

<date month='November' day='1' year='2015' />

<abstract><t>JavaScript Object Notation, JSON (RFC7159) is a text-based data format which is popular for Web based data exchange.  Concise Binary Object Representation, CBOR (RFC7049) is a binary data format which has been optimized for data exchange for the Internet of Things (IoT).  For many IoT scenarios, CBOR formats will be preferred since it can help decrease transmission payload sizes as well as implementation code sizes compared to other data formats.  Web Linking (RFC5988) provides a way to represent links between Web resources as well as the relations expressed by them and attributes of such a link.  In constrained networks, a collection of Web links can be exchanged in the CoRE link format (RFC6690).  Outside of constrained environments, it may be useful to represent these collections of Web links in JSON, and similarly, inside constrained environments, in CBOR.  This specification defines a common format for this.  Group Communication for the Constrained Application Protocol (RFC7390) defines a number of JSON formats for controlling communication between groups of nodes employing the Constrained Application Protocol (CoAP).  In a similar vein, this specification defines CBOR variants of these formats.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-core-links-json-04' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-core-links-json-04.txt' />
</reference>



<reference  anchor='RFC3986' target='http://www.rfc-editor.org/info/rfc3986'>
<front>
<title>Uniform Resource Identifier (URI): Generic Syntax</title>
<author initials='T.' surname='Berners-Lee' fullname='T. Berners-Lee'><organization /></author>
<author initials='R.' surname='Fielding' fullname='R. Fielding'><organization /></author>
<author initials='L.' surname='Masinter' fullname='L. Masinter'><organization /></author>
<date year='2005' month='January' />
<abstract><t>A Uniform Resource Identifier (URI) is a compact sequence of characters that identifies an abstract or physical resource.  This specification defines the generic URI syntax and a process for resolving URI references that might be in relative form, along with guidelines and security considerations for the use of URIs on the Internet.  The URI syntax defines a grammar that is a superset of all valid URIs, allowing an implementation to parse the common components of a URI reference without knowing the scheme-specific requirements of every possible identifier.  This specification does not define a generative grammar for URIs; that task is performed by the individual specifications of each URI scheme.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='STD' value='66'/>
<seriesInfo name='RFC' value='3986'/>
<seriesInfo name='DOI' value='10.17487/RFC3986'/>
</reference>



<reference  anchor='RFC5988' target='http://www.rfc-editor.org/info/rfc5988'>
<front>
<title>Web Linking</title>
<author initials='M.' surname='Nottingham' fullname='M. Nottingham'><organization /></author>
<date year='2010' month='October' />
<abstract><t>This document specifies relation types for Web links, and defines a registry for them.  It also defines the use of such links in HTTP headers with the Link header field.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='RFC' value='5988'/>
<seriesInfo name='DOI' value='10.17487/RFC5988'/>
</reference>



<reference  anchor='RFC7252' target='http://www.rfc-editor.org/info/rfc7252'>
<front>
<title>The Constrained Application Protocol (CoAP)</title>
<author initials='Z.' surname='Shelby' fullname='Z. Shelby'><organization /></author>
<author initials='K.' surname='Hartke' fullname='K. Hartke'><organization /></author>
<author initials='C.' surname='Bormann' fullname='C. Bormann'><organization /></author>
<date year='2014' month='June' />
<abstract><t>The Constrained Application Protocol (CoAP) is a specialized web transfer protocol for use with constrained nodes and constrained (e.g., low-power, lossy) networks.  The nodes often have 8-bit microcontrollers with small amounts of ROM and RAM, while constrained networks such as IPv6 over Low-Power Wireless Personal Area Networks (6LoWPANs) often have high packet error rates and a typical throughput of 10s of kbit/s.  The protocol is designed for machine- to-machine (M2M) applications such as smart energy and building automation.</t><t>CoAP provides a request/response interaction model between application endpoints, supports built-in discovery of services and resources, and includes key concepts of the Web such as URIs and Internet media types.  CoAP is designed to easily interface with HTTP for integration with the Web while meeting specialized requirements such as multicast support, very low overhead, and simplicity for constrained environments.</t></abstract>
</front>
<seriesInfo name='RFC' value='7252'/>
<seriesInfo name='DOI' value='10.17487/RFC7252'/>
</reference>



<reference anchor='I-D.ietf-core-interfaces'>
<front>
<title>Reusable Interface Definitions for Constrained RESTful Environments</title>

<author initials='Z' surname='Shelby' fullname='Zach Shelby'>
    <organization />
</author>

<author initials='M' surname='Vial' fullname='Matthieu Vial'>
    <organization />
</author>

<author initials='M' surname='Koster' fullname='Michael Koster'>
    <organization />
</author>

<date month='October' day='19' year='2015' />

<abstract><t>This document defines a set of reusable REST resource design patterns suitable for use in constrained environments, based on IETF CoRE standards for information representation and information exchange.  Interface types for Sensors, Actuators, Parameters, and resource Collections are defined using the "if" link attribute defined by CoRE Link Format [RFC6690].  Clients may use the "if" attribute to determine how to consume resources.  Dynamic linking of state updates between resources, either on an endpoint or between endpoints, is defined with the concept of Link Bindings.  We also define conditional observation attributes that work with Link Bindings or with simple CoAP Observe [RFC7641].</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-core-interfaces-04' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-core-interfaces-04.txt' />
<format type='PDF'
        target='http://www.ietf.org/internet-drafts/draft-ietf-core-interfaces-04.pdf' />
</reference>



<reference anchor='I-D.ietf-core-resource-directory'>
<front>
<title>CoRE Resource Directory</title>

<author initials='Z' surname='Shelby' fullname='Zach Shelby'>
    <organization />
</author>

<author initials='M' surname='Koster' fullname='Michael Koster'>
    <organization />
</author>

<author initials='C' surname='Bormann' fullname='Carsten Bormann'>
    <organization />
</author>

<author initials='P' surname='Stok' fullname='Peter Van der Stok'>
    <organization />
</author>

<date month='October' day='19' year='2015' />

<abstract><t>In many M2M applications, direct discovery of resources is not practical due to sleeping nodes, disperse networks, or networks where multicast traffic is inefficient.  These problems can be solved by employing an entity called a Resource Directory (RD), which hosts descriptions of resources held on other servers, allowing lookups to be performed for those resources.  This document specifies the web interfaces that a Resource Directory supports in order for web servers to discover the RD and to register, maintain, lookup and remove resources descriptions.  Furthermore, new link attributes useful in conjunction with an RD are defined.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-core-resource-directory-05' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-core-resource-directory-05.txt' />
<format type='PDF'
        target='http://www.ietf.org/internet-drafts/draft-ietf-core-resource-directory-05.pdf' />
</reference>



<reference anchor='I-D.jennings-core-senml'>
<front>
<title>Media Types for Sensor Markup Language (SENML)</title>

<author initials='C' surname='Jennings' fullname='Cullen Jennings'>
    <organization />
</author>

<author initials='Z' surname='Shelby' fullname='Zach Shelby'>
    <organization />
</author>

<author initials='J' surname='Arkko' fullname='Jari Arkko'>
    <organization />
</author>

<author initials='A' surname='Keranen' fullname='Ari Keranen'>
    <organization />
</author>

<date month='January' day='13' year='2016' />

<abstract><t>This specification defines media types for representing simple sensor measurements and device parameters in the Sensor Markup Language (SenML).  Representations are defined in JavaScript Object Notation (JSON), Concise Binary Object Representation (CBOR), eXtensible Markup Language (XML), and Efficient XML Interchange (EXI), which share the common SenML data model.  A simple sensor, such as a temperature sensor, could use this media type in protocols such as HTTP or CoAP to transport the measurements of the sensor or to be configured.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-jennings-core-senml-04' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-jennings-core-senml-04.txt' />
</reference>


<reference anchor="REST" target="http://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf">
  <front>
    <title>Architectural Styles and the Design of Network-based Software Architectures</title>
    <author initials="R." surname="Fielding" fullname="Roy Thomas Fielding">
      <organization>University of California, Irvine</organization>
    </author>
    <date year="2000"/>
  </front>
  <seriesInfo name="Ph.D." value="Dissertation, University of California, Irvine"/>
  <format type="PDF" target="http://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf"/>
</reference>
<reference anchor="HypermediaDemonstrator" target="https://github.com/connectIOT/HypermediaDemo">
  <front>
    <title>Demonstration of a HATEOAS based system architecture for the Web of Things</title>
    <author initials="M." surname="Koster">
      <organization></organization>
    </author>
    <date year="2016"/>
  </front>
</reference>
<reference anchor="W3C-WoT" target="https://www.w3.org/WoT/IG/">
  <front>
    <title>W3C Web of Things Interest Group</title>
    <author initials="." surname="WoT IG">
      <organization></organization>
    </author>
    <date year="2016"/>
  </front>
</reference>
<reference anchor="T2TRG" target="https://datatracker.ietf.org/rg/t2trg/charter/">
  <front>
    <title>IRTF Thing to Thing Research Group</title>
    <author initials="." surname="IRTF">
      <organization></organization>
    </author>
    <date year="2016"/>
  </front>
</reference>


    </references>




  </back>
</rfc>

